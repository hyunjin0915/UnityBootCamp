- OOPë¥¼ ì´ìš©í•œ 2D ë Œë”ë§ ì—”ì§„ ë§Œë“¤ê¸° 7
- ë¦¬í”Œë ‰ì…˜ì„ ì´ìš©í•œ ê°ì²´ ì²˜ë¦¬
- ì¶©ëŒ ì²˜ë¦¬
- ~~JSON~~
- ë¸ë¦¬ê²Œì´íŠ¸

---

### Custom Component - Script

- SRP
- ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì™€ ìƒê´€ì—†ì´ ë™ì‘í•˜ê²Œ ë§Œë“¤ê¸°(ê²°í•©ì„± â¬‡ï¸)

---

<aside>
ğŸ”§

World.cs ì˜ Sort() ì— ì›í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë„£ì–´ì„œ ì •ë ¬í•  ìˆ˜ ìˆê²Œ ì •ë ¬ ë¡œì§ í•¨ìˆ˜ë¥¼ ë”°ë¡œ ë¹¼ì„œ ì •ì˜

</aside>

â†’ í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— ë„£ì–´ì•¼ í•¨ â†’ **ì¼ê¸‰ ê°ì²´** ì‚¬ìš©

# â˜‘ï¸ Delegate

- í•¨ìˆ˜ì˜ ì°¸ì¡°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì°¸ì¡°í˜• íƒ€ì…
    
    = ì–´ë–¤ í•¨ìˆ˜ì˜ ìœ„ì¹˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„° ê°™ì€ ì—­í• ì„ í•˜ëŠ” íƒ€ì… 
    

`public delegate int **Command**(int a, int b);`

- Command : í•¨ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ìë£Œí˜• â†’ ëŒ€ë¬¸ìë¡œ ì¨ì¤Œ

```csharp
 public delegate int Command(int a, int b);
 internal class Program
 {
     static int Add(int A, int B)
     {
         return A + B;
     }
     static int Sub(int A, int B)
     {
         return A - B;
     }
     static void Main(string[] args)
     {
         Command command = Add;
         Console.WriteLine(command(1, 2));
         
         command = Sub;
         Console.WriteLine(command(1,2));
```

- **í´ë˜ìŠ¤ ê²°í•©ë„ë¥¼ ë‚®ì¶œ ìˆ˜ ìˆìŒ**
    
    í´ë˜ìŠ¤ ê°„ ê²°í•©ë„ê°€ ë†’ë‹¤? = í•œ í´ë˜ìŠ¤ê°€ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— ì§ì ‘ì ìœ¼ë¡œ ì˜ì¡´í•˜ê³  ìˆë‹¤
    
    - Delegate ì‚¬ìš©í•˜ë©´ ì–´ë–¤ ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ì˜ í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œ X
    - Delegate ë¥¼ í†µí•´ í˜¸ì¶œ â†’ í˜¸ì¶œ ëŒ€ìƒì´ ë°”ë€Œì–´ë„ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”
    1. ê²°í•©ë„ê°€ ë†’ì€ ì½”ë“œ 
    
    ```csharp
    using System;
    
    class Sender {
        public void SendMessage() {
            Receiver receiver = new Receiver();
            receiver.PrintMessage("Hello, delegate!");
        }
    }
    
    class Receiver {
        public void PrintMessage(string msg) {
            Console.WriteLine(msg);
        }
    }
    
    class Program {
        static void Main() {
            Sender sender = new Sender();
            sender.SendMessage();
        }
    }
    
    ```
    
    1. Delegate ë¡œ ê²°í•©ë„ë¥¼ ë‚®ì¶˜ ì½”ë“œ
    
    ```csharp
    using System;
    
    class Sender {
        public delegate void MessageHandler(string msg);  // ë¸ë¦¬ê²Œì´íŠ¸ ì„ ì–¸
    
        public void SendMessage(MessageHandler handler) {
            handler("Hello, delegate!");  // ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ í†µí•´ í˜¸ì¶œ
        }
    }
    
    class Receiver {
        public void PrintMessage(string msg) {
            Console.WriteLine(msg);
        }
    }
    
    class Program {
        static void Main() {
            Sender sender = new Sender();
            Receiver receiver = new Receiver();
    
            // delegateì— Receiverì˜ ë©”ì„œë“œë¥¼ ì—°ê²°
            Sender.MessageHandler handler = receiver.PrintMessage;
    
            sender.SendMessage(handler);  // delegateë¥¼ í†µí•´ ë©”ì„œë“œ í˜¸ì¶œ
        }
    }
    
    ```
    
    - Sender ëŠ” Receiver ì§ì ‘ ì‚¬ìš© X
    - Sender ëŠ” ë‹¨ìˆœíˆ delegate í˜¸ì¶œ, ì–´ë–¤ ê°ì²´ê°€ ì—°ê²°ë ì§€ ëª¨ë¦„
    - Receiver ê°€ ë°”ë€Œê±°ë‚˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ ì—°ê²°í•  ë•Œë„ Sender ìˆ˜ì •í•  í•„ìš”X
    
    â–¶ï¸ ê²°í•©ë„ê°€ ë‚®ì•„ì§€ê³  ì½”ë“œ ìœ ì—°ì„±ì´ ë†’ì•„ì§!!
    

- ì´ë ‡ê²Œë„ ì‚¬ìš©
    
    `Sample.Command cmd = new Sample.Command(Sub);`
    

- delegate ëŠ” ë³´í†µ í´ë˜ìŠ¤ ì•ˆì— ì „ìš©ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ

![image.png](attachment:8fa9397e-049f-4c67-b5d2-a9dd0440f1b4:image.png)

### í•¨ìˆ˜í¬ì¸í„°ì™€ Delegate ì°¨ì´ì 

**í•¨ìˆ˜í¬ì¸í„°**

ë³€ìˆ˜ì—¬ì„œ í•¨ìˆ˜ í•˜ë‚˜ë§Œ ê°€ë¦¬í‚¬ ìˆ˜ ìˆìŒ

**Delegate**

ê°ì²´ë¥¼ í•˜ë‚˜ ë”°ë¡œ ë§Œë“¤ì—ˆìŒ â†’ ì—¬ëŸ¬ ê°œë¥¼ ê°€ë¦¬í‚¤ê²Œ í•  ìˆ˜ ìˆìŒ

```csharp
DelegateTest t = new DelegateTest(A);
t += A;
t += B;
t(); // A A B ì¶œë ¥
t -= A; //ëº„ ìˆ˜ë„ ìˆìŒ
```

- ë¦¬ìŠ¤íŠ¸ì²˜ëŸ¼ ë„£ì—ˆë‹¤ê°€ ëºë‹¤ê°€ ê°€ëŠ¥!**(ìˆœì„œ ë°”ë€Œì§€ ì•ŠìŒ)**
- **ë„¤íŠ¸ì›Œí¬ì—ì„œ** ë§ì´ ì‚¬ìš©
    
    ì ‘ì†í•˜ë©´ â†’ ì´ê²ƒ ì‹¤í–‰ (Callback í•¨ìˆ˜) *ex) ì†Œì¼“ìœ¼ë¡œ ë“£ê³  ìˆë‹¤ê°€ ì ‘ì†í•˜ë©´ delegate* 
    

## Delegate | Event

= Notification

```csharp
    public class EventClass
    {
        public delegate void DelegateSample();
        public DelegateSample delegateSample;
        public event DelegateSample EventSample;
        
        public void Do()
				{
				    EventSample?.Invoke(); //ìì‹ ì˜ í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ì‹¤í–‰ ê°€ëŠ¥
				}
    }
    //...
    
	static void Main(string[] args)
	{
	    EventClass eventClass = new EventClass();
	    eventClass.EventSample += Test;
	    //...
```

- = ì—°ì‚°ì ì‚¬ìš© ë¶ˆê°€(êµ¬ë…/ êµ¬ë…í•´ì œ)
- **ìì‹ ì˜ í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ì‹¤í–‰ ê°€ëŠ¥**
    - ë§ˆìš°ìŠ¤ ëˆ„ë¥´ë©´ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ ë“±ë¡í•´ì¤˜ â†’ í•´ë‹¹ í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ëŒì•„ê°€ì•¼ í•¨
    - ë‚´ë¶€ìš©ì´ë‹ˆ ë°–ì—ì„œëŠ” í•¨ìˆ˜ ë“±ë¡, ì‚­ì œë§Œ í•˜ë¼ëŠ” ëœ»
    
    â¡ï¸ Delegate ì™€ ë™ì¼í•˜ë‚˜ **ìš©ë„**ê°€ ë‹¤ë¦„!
    

## Delegate | Action

= ë°˜í™˜ ê°’ ì—†ê³ / ë§¤ê°œë³€ìˆ˜(0~ 16ê°œ) ê°€ì§„ í•¨ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Generic Delegate

```csharp
Action action = Test; //ì¸ì ì—†ëŠ” í•¨ìˆ˜
Action<int> helloAction = Test2; //delegate ë§Œë“¤ê±´ë° ì¸ìë¡œ int í•˜ë‚˜ ë°›ëŠ” ê±° ë§Œë“¤ì–´ì¤˜
helloAction(2);
```

- ì½”ë“œë¥¼ ê°„ì†Œí™”í•˜ê³  í‘œí˜„ë ¥ì„ ë†’ì¼ ìˆ˜ ìˆìŒ
- ë©€í‹°ìºìŠ¤íŒ… ê°€ëŠ¥

## Delegate | Func

= ë°˜í™˜ íƒ€ì… ìˆê³ / ë§¤ê°œë³€ìˆ˜(0~16ê°œ) ê°€ì§„ í•¨ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Generic Delegate

```csharp
Func<int, int> f = Test3;
f += (int number) => {return number+10; }; //ëŒë‹¤ì‹ ì‚¬ìš©
Console.WriteLine(f(2));
```

- ë©€í‹°ìºìŠ¤íŒ… ê°€ëŠ¥í•˜ì§€ë§Œ ë°˜í™˜ê°’ì„ ê°€ì§€ê¸° ë•Œë¬¸ì—
ë§ˆì§€ë§‰ìœ¼ë¡œ ì¶”ê°€ëœ ë©”ì„œë“œì˜ ë°˜í™˜ê°’ì´ ìµœì¢…ì ìœ¼ë¡œ ë°˜í™˜ë¨

## ìµëª…í•¨ìˆ˜/ ëŒë‹¤ì‹

`Sample.Command cmd = new Sample.Command((int A, int B) => { return A * B; });`

## ğŸš© í”„ë¡œì íŠ¸ì— ì ìš©í•˜ê¸°=================

### World.cs

```csharp
    public delegate int SortCompare(GameObject first, GameObject second);
    public SortCompare sortCompare;

```

GameObject ë“¤ì„ Sort() í•´ì¤„ ê¸°ì¤€ì„ ë‹´ê³  ìˆëŠ” í•¨ìˆ˜ë¥¼ ì €ì¥í•  delegateë¥¼ World í´ë˜ìŠ¤ ì•ˆì— ì„ ì–¸

World - Sort() ì—ì„œëŠ” í•´ë‹¹ delegate í˜¸ì¶œí•´ì„œ ì¸ìë¡œ ë¹„êµí•  ê²Œì„ ì˜¤ë¸Œì íŠ¸ 2ê°œ ë„£ì–´ì£¼ê¸°

### Program.cs

SpriteRenderer ì˜ OrderLayer ë¹„êµí•˜ëŠ” í•¨ìˆ˜ Program.cs ì— ì •ì˜

`Engine.Instance.setSortCompare(Compare);`

í•´ë‹¹ í•¨ìˆ˜ ë„£ì–´ì£¼ê¸°

â†’ í´ë˜ìŠ¤ ê¸°ë°˜ì¸ë° Compare í•¨ìˆ˜ë¥¼ ë„£ì–´ì¤€ë‹¤ëŠ” ê²ƒì´ ì–´ìƒ‰(?)

## Awake í•¨ìˆ˜ ì¶”ê°€

- Engine ì—ì„œ load ëë‚˜ë©´ Awake ì‹¤í–‰
- World ì—ì„œ ì „ì²´ component ì˜ awake ì‹¤í–‰
- ì „ì²´ Componenet ì˜ Awake ì‹¤í–‰ì‹œí‚¤ê¸° - Virtual ì´ë‹ˆê¹Œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì— í•¨ìˆ˜ O

## AIController í´ë˜ìŠ¤ ìˆ˜ì •

Transform í´ë˜ìŠ¤ì˜ Translate í•¨ìˆ˜ë¡œ ì´ë™í•˜ê²Œ ìˆ˜ì •

â¬‡ï¸

characterController2D.Move í•¨ìˆ˜ë¡œ ì´ë™ 

# ì¶©ëŒ êµ¬í˜„í•˜ê¸°

### ìœ ë‹ˆí‹° - CharacterController

ìœ ë‹ˆí‹°ì—ì„œ transform.Translate ë¡œ ì´ë™ êµ¬í˜„í•˜ê³  ê° ì˜¤ë¸Œì íŠ¸ì— collider ë¶™ì—¬ì£¼ë©´ â†’ ì¶©ëŒ ì•ˆë¨!!

transform.Translate ëŠ” ìœ„ì¹˜ ê°’ ìˆ˜í•™ìœ¼ë¡œ ê³„ì‚°ë§Œ í•˜ê¸° ë•Œë¬¸

â†’ **ì•ìœ¼ë¡œ ë¯¸ë¦¬ ê°€ë„ ë˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ê²ƒ**ì´ í•„ìš”

â†’ **CharacterController** ì‚¬ìš© : ë¨¼ì € ê°€ë³´ëŠ” ê²ƒ 

(RigidBody ì‚¬ìš©í•˜ë©´ ë„˜ì–´ì§€ê³ ,,, â†’ ë‹¤ êµ¬í˜„í•˜ê¸° ì–´ë ¤ìš°ë‹ˆê¹Œ)

```csharp
Vector3 direction = new Vector3(h , 0, v) * Time.deltaTime() * moveSpeed;

characterController.Move(direction + new Vector3(0, -9.81f, 0));
```

- Skin Width
    - ì„¤ì •í•´ë‘” ë‘ê»˜ ë§Œí¼ì€ ì¶©ëŒë˜ì§€ ì•Šê²Œ
    - ì„œë¡œ ë¶€ë”ªí˜€ì„œ ë¹„ë¹„ë‹¤ê°€ ë‚ ë¼ê°€ëŠ” ê±° ë°©ì§€(0.08 - 8ì„¼ì¹˜)
- í•´ë‹¹ í´ë˜ìŠ¤ë¥¼Extend í•´ì„œ ì‚¬ìš©
    
    +) Unity ThirdPerson Asset ì œê³µí•¨ 
    

## CharacterController2D : Collider2D

### public void Move(int addX, int addY)

- ì˜¤ë¸Œì íŠ¸ ìœ„ì¹˜ ì´ë™/ ì´ë™í•˜ë ¤ëŠ” ìœ„ì¹˜ì˜ ê²Œì„ ì˜¤ë¸Œì íŠ¸ê°€ Collider2D ì»´í¬ë„ŒíŠ¸ë¥¼ ê°–ê³  ìˆëŠ”ì§€, isTrigger ê°€ True ì¸ì§€ ì²´í¬
- ì´ë•Œ í•´ë‹¹í•˜ëŠ” ê²Œì„ì˜¤ë¸Œì íŠ¸ 2ê°œì˜ OnTriggerEnter í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê²Œ í•´ì•¼ í•¨
    - OnTriggerEnter() í•¨ìˆ˜ëŠ” ìƒì†ì´ ì•„ë‹˜ â†’ [***Reflection***](https://www.notion.so/1b19103cc1eb809aa984e01aa9fd28ef?pvs=21)  ì‚¬ìš©í•´ì•¼ í•¨!!
    - ì¼ë°˜ì ì¸ ìƒì†ìœ¼ë¡œëŠ” ì ‘ê·¼ ì§€ì •ì ìƒê´€ì—†ì´ í•¨ìˆ˜ ì‹¤í–‰ì´ ë¶ˆê°€í•˜ê³ ,
        
        ì‹¤ì œ ìœ ë‹ˆí‹°ì—ì„œë„ ìƒê°í•´ë³´ë©´ private void OnTriggerEnter2D ë¡œ ì¨ì„œ ì˜ ì‚¬ìš©í•¨
        
- ì²˜ìŒì— GameObject ìƒì„±í•˜ë©´ transform ë¹„ì–´ ìˆìŒ
    - ë¹„ì–´ìˆìœ¼ë©´ ì§€ê¸ˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ë„£ê³  ì•„ë‹ˆë©´ í˜„ì¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ëœ»
        
        `inComponent.transform = this.transform 
                    == null ? inComponent as Transform : transform;`
        
    - ë‹¤ì‹œ ìˆ˜ì •
        
        ```csharp
        public void Init()
        {
            transform = new Transform();
            AddComponent<Transform>();
        }
        ```
        

# ê²Œì„ ëë‚´ê¸°

í”Œë ˆì´ì–´ê°€ í•˜ë©´ ì•ˆë¨ â†’ ê´€ë¦¬í•˜ëŠ” ë§¤ë‹ˆì €ê°€ ê²Œì„ì„ ëë‚´ì•¼ í•¨

### public class GameManager : Component

- ëª¬ìŠ¤í„°/ ê³¨ê³¼ ë‹¿ìœ¼ë©´
    
    â†’ CharacterController2D ì—ì„œ OnTriggerEneterë¥¼ Reflection ìœ¼ë¡œ ì‹¤í–‰í•´ì„œ
    
    â†’ ê° ê²Œì„ ì˜¤ë¸Œì íŠ¸ì—ì„œ(PlayerController.cs) GameManagerì˜ isFinish/ isGameOver ì˜ bool ê°’ì„ true ë¡œ ë³€í™˜ 
    
- í…ìŠ¤íŠ¸ ì¶œë ¥ìš© ê²Œì„ì˜¤ë¸Œì íŠ¸ ìƒì„± ë° world ì— ì¶”ê°€ë„ ì‹¤í–‰

- SpriteRenderer ì—ì„œ Texture ì§€ì›Œì¤˜ì•¼ í•¨

```csharp
    ~SpriteRenderer()
    {
        SDL.SDL_DestroyTexture(myTexture);
    }

```

### public abstract class Renderer : Component

- Render()  ê¸°ëŠ¥ì„ ìœ„í•´ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ì œì‘í•˜ê³ ,
- TextRenderer, SpriteRenderer í´ë˜ìŠ¤ì—ì„œ ì´ë¥¼ ì¬ì •ì˜í•˜ì—¬ ì‚¬ìš©
