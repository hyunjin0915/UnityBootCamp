- OOPë¥¼ ì´ìš©í•œ 2D ë Œë”ë§ ì—”ì§„ ë§Œë“¤ê¸° 4

- IEnumerator

- ì¶”ìƒ í´ë˜ìŠ¤

- interface

- abstract class

- interfaceë¥¼ ì´ìš©í•œ í´ë˜ìŠ¤ ì„¤ê³„

- ë°˜ë³µì ë§Œë“¤ì–´ ë³´ê¸°

### ğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥ğŸğŸ¥

# [ë™ì  ë°°ì—´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ì]

Addë¡œ ë°°ì—´ì— ìë£Œ ì¶”ê°€

RemoveAtìœ¼ë¡œ ë°°ì—´ ìë£Œ ì‚­ì œ
ìë£Œ ê°œìˆ˜ëŠ” Count ë¡œ ë³´ì—¬ì£¼ê¸°

ìë£Œì˜ ì ‘ê·¼ê³¼ ì…ë ¥ì€ [] ì—°ì‚°ìë¡œ ë˜ê²Œ 

## ~~í•´ì„¤~~

+) Dictionary

í•´ì‹± â†’ spars data â†’ í¬ì†Œ ë°ì´í„°

í•´ì‹± ì¶©ëŒ ì²˜ë¦¬ 

- **try catch**
    - exception â†’ ì„¤ê³„ â†’ **error ë„ ê°ì²´ì„** â†’ Class
    - unityë¡œ ê²Œì„ ë§Œë“¤ ë•ŒëŠ” try catch ì˜ ì‚¬ìš©í•˜ì§€ X
        
        (ì—”ì§„ì´ ì¡ì•„ì¤Œ - ì˜¤ë¥˜ë¥¼ ë°”ë¡œ ë°”ë¡œ ì¡ê³  ê°€ì•¼ í•¨)
        
    - **Custom Exception ì„¤ê³„**ë„ ê°€ëŠ¥
        
        ```csharp
        class CustomException : Exception
        {
            public CustomException(string message) : base(message)
            {
                
            }
        }
        static void Main(string[] args)
        {
            try
            {
                int num = 5;
                if(num == 5)
                    throw new CustomException ("ë‚´ê°€ ë§Œë“  ê±°");
            } //...
        ```
        

---

- ìƒì„±ì ì•ˆì—ì„œ ë°°ì—´ ì´ˆê¸°í™”í•˜ê¸°
    - ê·¸ëƒ¥ í´ë˜ìŠ¤ ì•ˆì—ë‹¤ê°€ ë§Œë“¤ë©´ **ì´ˆê¸°í™”ë˜ëŠ” ì‹œì **ì„ ì•Œê¸° ì–´ë ¤ì›€
    
    ```csharp
    public DynamicArray()
    {
        dataArray = new T[5]; 
    }
    ```
    

- ë°°ì—´ ë³µì‚¬ í•´ì£¼ëŠ” í•¨ìˆ˜
    
    ```csharp
    Object[] newArray = new Object[data.Length * 2];
    Array.Copy(data, newArray, data.Length);
    ```
    

- **ArraySegment** ë¼ëŠ” êµ¬ì¡°ì²´(ê·¸ëƒ¥ ì´ëŸ° ê²Œ ìˆêµ¬ë‚˜ ì •ë„ë§Œ)
    
    https://learn.microsoft.com/ko-kr/dotnet/api/system.arraysegment-1?view=net-8.0
    

<aside>
ğŸ¥

ìš°ë¦¬ê°€ ë§Œë“  DynamicArray ë¡œëŠ” `foreach(var data in array)` ì´ëŸ°ì‹ìœ¼ë¡œ ì‚¬ìš© ë¶ˆê°€

â†’ IEnumerator ì •ì˜ í•„ìš” **(ì¸í„°í˜ì´ìŠ¤ë¡œ ê°€ì ¸ì™€ì„œ ì¬ì •ì˜)**

</aside>

# ì¶”ìƒ í´ë˜ìŠ¤

- ì¶”ìƒ ë©”ì„œë“œ êµ¬í˜„ ë¶ˆê°€
    
    â†’ ìƒì† ë°›ì€ ìì‹ í´ë˜ìŠ¤ì—ì„œëŠ” overrideë¥¼ í†µí•´ ë°˜ë“œì‹œ ì¬ì •ì˜ í•´ì•¼ í•¨
    
- ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ ìˆ˜ ì—†ìŒ

ì—¬ëŸ¬ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì•„ì„œ êµ¬í˜„ì„ ê°•ì œí•˜ê³  ì‹¶ìŒ

BUT **C#ì€ ë‹¤ì¤‘ ìƒì†ì´ ë¶ˆê°€ëŠ¥** .. (**ë‹¤ì´ì•„ëª¬ë“œ ë¬¸ì œ** ë°œìƒ)

# â¡ï¸ Interface

- í•¨ìˆ˜ êµ¬í˜„ ë¶€ ì—†ê³ , ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ ìˆ˜ë„ ì—†ìŒ
- ìì‹ í´ë˜ìŠ¤ ì˜¤ë²„ë¼ì´ë”© ê°•ì œ
- ë‹¤ì¤‘ ìƒì† ê°€ëŠ¥
    - ì–´ì°¨í”¼ í•¨ìˆ˜ ê»ë°ê¸°ë§Œ ìˆê¸° ë•Œë¬¸ì— ë‹¤ì´ì•„ëª¬ë“œ ë¬¸ì œ ë°œìƒí•˜ì§€ ì•ŠìŒ
- ì´ë¦„ ì•ì— I ì¨ì£¼ê¸°

## Interface í™œìš© : **ë‹¤í˜•ì„±**

```csharp
List<IItem> items = new List<IItem>();
items.Add(new Potion());
items.Add(new Sword());
foreach(var item in items)
{
		item.Use();
}
```

- virtual í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê±´ ì„±ëŠ¥ì´ ë–¨ì–´ì§
- [*C#ì˜ Reflection*](https://www.notion.so/1959103cc1eb805f9f3fd0dfb0a1f7af?pvs=21) â†’ ìë™ìœ¼ë¡œ ìºìŠ¤íŒ…,,, ê¸°ëŠ¥ì„ ê°•ì œí•  ìˆ˜ ìˆìŒ
    
    í•´ë‹¹ ê°œì²´ê°€ íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ ì²´í¬í•˜ì—¬ì„œ ì‚¬ìš©(ex. ì¶©ëŒ ì²˜ë¦¬ - ITriggerable)
    

> í˜¼ì ê°œë°œí•˜ë©´ ì“¸ ì¼ ì—†ìŒ â†’ ì´ê²ƒë„ ë‹¤ë¥¸ ì‚¬ëŒ ëª» ë¯¿ì–´ì‰ ì´ ë² ì´ìŠ¤
> 

<aside>
ğŸ¥

IEnumerator ì¸í„°í˜ì´ìŠ¤ ê°€ì ¸ì™€ì„œ ë°°ì—´ ì¶œë ¥ì„ í•´ë³´ì

</aside>

![image](https://github.com/user-attachments/assets/5d9d6afa-4d34-4eb0-9ddd-62250f03ffaa)


# IEnumerable

= collectionì„ ìˆœíšŒí•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ 

IEnumeratorë¥¼ ë°˜í™˜í•˜ì—¬ ë°˜ë³µí•  ìˆ˜ ìˆê²Œ í•¨

- `GetEnumerator( )` í•¨ìˆ˜ : Collection ìˆœíšŒì˜ `foreachë¬¸`ì„ ê°€ëŠ¥í•˜ê²Œ í•´ì¤Œ
    
    ```csharp
    public interface IEnumerable
    {
        IEnumerator GetEnumerator();
    }
    ```
    
- ë§¤ë²ˆ ìƒˆë¡œìš´ IEnumerator ì œê³µ
    
    â†’ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œ ê°€ëŠ¥ 
    

# IEnumerator

- **Current** : í˜„ì¬ ìœ„ì¹˜ì˜ ë°ì´í„°
- **MoveNext** : ë‹¤ìŒ ìœ„ì¹˜ë¡œ ì´ë™ í›„ ë‹¤ìŒ ìœ„ì¹˜ ë°ì´í„° ì¡´ì¬ ì—¬ë¶€
- **Restet** : ì¸ë±ìŠ¤ë¥¼ ì´ˆê¸° ìœ„ì¹˜ë¡œ ë³€ê²½

```csharp
List<int> numbers = new List<int> { 1, 2, 3 };
IEnumerator<int> enumerator = numbers.GetEnumerator();

while (enumerator.MoveNext())  // ë‹¤ìŒ ìš”ì†Œë¡œ ì´ë™
{
    Console.WriteLine(enumerator.Current);  // í˜„ì¬ ìš”ì†Œ ì¶œë ¥
}
```

## Iterator ë°˜ë³µì

https://learn.microsoft.com/ko-kr/dotnet/csharp/iterators

- ì»¬ë ‰ì…˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ìˆ¨ê¸°ë©´ì„œ ìš”ì†Œë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” ê°œë…
- IEnumerable ê³¼ IEnumeratorë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ í•¨

```csharp
static IEnumerable GetNumbers()
{
    Thread.Sleep(1000);
    yield return 1; //ê°’ì„ ë¦¬í„´ + ì•„ê¹Œ ì–´ë””ê¹Œì§€ í–ˆëŠ”ì§€ ê¸°ì–µí•´ì¤Œ
    Thread.Sleep(1000);
    yield return 2;
    Thread.Sleep(1000);
    yield return 3;
}
// ... main í•¨ìˆ˜
foreach(var i in GetNumbers())
{
    Console.WriteLine(i);
}
```

```csharp
static int[] arr = { 1, 2, 3, 4, 5 };
static IEnumerable GetNumbers()
{
    for (int i = 0; i < 5; i++)
    {
        yield return arr[i]; 
        //ëŒì•„ê°€ë„ iê°’ ì•ˆ ë‚ ë¼ê°€ê³ !! 
        //ì–´ë””ê¹Œì§€ ì‘ì—…í–ˆëŠ”ì§€ ê¸°ì–µí–ˆë‹¤ê°€ ë°°ì—´ì˜ ìš”ì†Œë“¤ ìˆœì°¨ì ìœ¼ë¡œ ì¶œë ¥í•´ì¤Œ
    }
}
//... main í•¨ìˆ˜
foreach(var i in GetNumbers())
{
    Console.WriteLine(i);
}
```

### ì ìš©í•´ë³´ê¸°

![image (1)](https://github.com/user-attachments/assets/cfe5582d-2d3f-44af-b0d6-260a3224a71c)


### ìœ ë‹ˆí‹°ì—ì„œëŠ” ,,,

â†’ ì‹œê°„ ë‚˜ëˆ ì„œ ì“°ë ¤ê³  ì‚¬ìš©

- **ì½”ë£¨í‹´**
    
    https://docs.unity3d.com/kr/2023.2/Manual/Coroutines.html
    
- **ë¹„ë™ê¸° ì”¬ë¡œë”©**
    
    `SceneManager.LoadSceneAsync`
    
- `WaitForSeconds()`

## +@)

- **IEnumerable** ì‚¬ìš© ì‹œ ë°ì´í„° ìˆ˜ì •, ì¸ë±ìŠ¤ë¡œ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€
    
    â†’ ë°ì´í„° ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš° List ì‚¬ìš©
    

- **Iterator(ë°˜ë³µì)** : ì»¬ë ‰ì…˜ ìš”ì†Œë¥¼ ìˆœíšŒí•˜ëŠ” ë°©ë²• ìì²´ë¥¼ ì •ì˜/ ê°œë…ì ì¸
- **Enumerator(ì—´ê±°ì)** : ì‹¤ì œë¡œ ì»¬ë ‰ì…˜ì„ ìˆœíšŒí•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´/ ì‹¤ì œ êµ¬í˜„ì²´

---

# [2D ë Œë”ë§ ì—”ì§„ ë§Œë“¤ê¸°]

## ë”ë¸” ë²„í¼ë§ | ë¯¸ë¦¬ ë§µ ê·¸ë¦¬ê¸°

ë§¤ë²ˆ ë§µì„ ìƒˆë¡œ ê·¸ë¦¬ê¸°

â¬‡ï¸

**ë¯¸ë¦¬ ë§µì„ ê·¸ë ¤ë†“ê³  ë°”ë€ŒëŠ” ë¶€ë¶„ë§Œ ë³€ê²½** â†’ ì„±ëŠ¥ ê°œì„  ê°€ëŠ¥

(ì…ì¶œë ¥ ê³¼ì • ì™„ì „ ëŠë¦¼)

### í”Œë¦¬ì»¤ë§(flickering) ë¬¸ì œ í•´ê²°

ë¹ˆí™”ë©´ê³¼ ìƒˆ ë°ì´í„°ë¥¼ ê·¸ë¦¬ëŠ” ìƒíƒœê°€ ì§§ì€ ì‹œê°„ ë™ì•ˆ í™”ë©´ì— ë³´ì—¬ì§€ê²Œ ë˜ê³ 

ê¹œë¹¡ì„ìœ¼ë¡œ ì¸ì‹í•˜ëŠ” ê²ƒ

### Engine.csì— backBuffer ë§Œë“¤ê¸°

- GameObject.cs ì˜ Render() í•¨ìˆ˜ì—ì„œ ë°”ë¡œ ê·¸ë¦¬ê¸° â†’ `Engine.BackBuffer[Y, X] = Shape`
- Engine.cs
    
    ```csharp
    protected void Render()
    {
        //Console.Clear(); ì§€ìš°ëŠ” ê³¼ì • ì´ì œ í•„ìš” X
        world.Render();
    
        //back <-> front (flip)
        for (int Y = 0; Y < 20; Y++)
        {
            for (int X = 0; X < 40; X++)
            {
                if (frontBuffer[Y,X] != backBuffer[Y,X]) //ë²„í¼ ë‘ ê°œ ë¹„êµí•´ì„œ ë‹¤ë¥´ë©´
                {
                    frontBuffer[Y, X] = backBuffer[Y, X]; //ì²˜ìŒì— ë„£ì–´ì£¼ëŠ” ê±° 
                    Console.SetCursorPosition(X, Y);
                    Console.Write(backBuffer[Y, X]);
                }
                
            }
        }
    }
    ```
    

## ì‹œê°„ | ëª¬ìŠ¤í„° 1/60 ì´ˆì— í•œ ë²ˆë§Œ ì›€ì§ì´ê¸°

- í¬ë¦¬ìŠ¤íƒˆ ì˜¤ì‹¤ë ˆì´í„° ,,

### Time í´ë˜ìŠ¤ ì‘ì„±

```csharp
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace L250218
{
    public class Time
    {
        public static int deltaTime
        {
            get
            {
                return deltaTimeSpan.Milliseconds;
            }
        }
        protected static TimeSpan deltaTimeSpan;

        protected static DateTime currentTime;
        protected static DateTime lastTime;

        public static void Update()
        {
            currentTime = DateTime.Now;
            deltaTimeSpan  = currentTime - lastTime;
            lastTime = currentTime;
        }
    }
}

```

- Monster.cs
    
    ```csharp
    public override void Update()
    {
        if(elapseTime > 0.05f)
        {
            elapseTime = 0.0f;
            // .. ì´ë™
        else
        {
    	     elapseTime += Time.deltaTime;
        }
    ```
